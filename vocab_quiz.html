<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nasry's Vocab Quiz</title> 
    <style>
        /* Gaya Dasar (Sama) */
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            max-width: 650px;
            margin: auto;
            background: white;
            padding: 20px 30px;
            border-radius: 10px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        h1 {
            /* JUDUL BARU */
            text-align: center;
            color: #0056b3;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        p {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
        }
        
        /* Gaya Kuis (Sama) */
        #settings-screen {
            text-align: center;
            padding: 40px 20px;
        }
        #num-questions {
            padding: 10px;
            font-size: 1.1em;
            width: 150px;
            border: 2px solid #ccc;
            border-radius: 4px;
            text-align: center;
            margin-bottom: 20px;
        }
        .start-btn {
            padding: 12px 30px;
            background-color: #5cb85c;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.2s;
        }
        .start-btn:hover {
            background-color: #4cae4c;
        }
        .error-message {
            color: #d9534f;
            margin-top: 10px;
            font-weight: bold;
        }
        .question-card {
            padding: 25px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 25px;
            background-color: #fcfcfc;
            min-height: 250px;
        }
        .word-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        .word {
            font-size: 2.2em;
            font-weight: bold;
            color: #d9534f;
            text-align: center;
            padding: 10px 0;
            margin-right: 15px;
        }
        .audio-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.8em;
            color: #007bff;
            padding: 5px;
            transition: transform 0.1s;
        }
        .audio-btn:hover {
            transform: scale(1.1);
        }
        .option {
            display: block;
            width: 100%;
            text-align: left;
            background-color: #f1f1f1;
            padding: 12px 20px;
            margin: 10px 0;
            border-radius: 6px;
            cursor: pointer;
            border: none;
            font-size: 1.1em;
        }
        .feedback {
            margin-top: 20px;
            font-weight: bold;
            text-align: center;
            padding: 12px;
            border-radius: 6px;
            min-height: 40px;
            font-size: 1.1em;
        }
        .correct { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .incorrect { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .next-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 25px;
        }
        .disabled { pointer-events: none; opacity: 0.8; }
        .correct-highlight { background-color: #a8e6a8 !important; font-weight: bold; }
        .incorrect-highlight { background-color: #ff9999 !important; }

        /* Gaya Hasil Baru (Sama) */
        .results-box {
            background-color: #e6f7ff;
            border: 2px solid #007bff;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-top: 20px;
        }
        .results-item {
            font-size: 1.3em;
            margin: 15px 0;
        }
        .results-item strong {
            color: #0056b3;
        }
        .score-percentage {
            font-size: 2.5em;
            font-weight: bold;
            color: #5cb85c;
            margin: 20px 0;
        }
        .restart-btn {
            padding: 12px 30px;
            background-color: #f0ad4e;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
        }

        /* NEW: Gaya Credit */
        .credits {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9em;
            color: #999;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>üìö Nasry's Vocab Quiz</h1>

    <div id="settings-screen">
        <p>Atur jumlah soal acak yang ingin Anda kerjakan (maksimal 405).</p>
        <label for="num-questions">Jumlah Soal:</label>
        <input type="number" id="num-questions" min="5" placeholder="5 - 405" required>
        <button class="start-btn" onclick="startQuiz()">Mulai Kuis</button>
        <div id="settings-error" class="error-message"></div>
    </div>
    
    <div id="quiz-screen" style="display: none;">
        <p id="quiz-info">Memuat...</p>
        <div id="quiz-container">
            </div>
        <button class="next-btn" id="next-button" onclick="loadNextQuestion()" style="display: none;">Lanjut Kosakata Berikutnya</button>
    </div>
</div>

<div class="credits">
    Created by <a href="https://instagram.com/mafinnasry_" target="_blank" style="color: #999;">@mafinnasry_</a>
</div>

<script>
    // ==========================================================
    // 1. DATABASE KOSAKATA DASAR (400+ PASANG) - (SAMA)
    // ==========================================================
    const VOCABULARY = [
        // Total Kosakata: 405 Pasang
        // (Isi database yang sama seperti kode sebelumnya)
        { en: "Ask", id: "Bertanya" }, { en: "Always", id: "Selalu" }, { en: "Answer", id: "Menjawab" },
        { en: "Afraid", id: "Takut" }, { en: "Agree", id: "Setuju" }, { en: "Away", id: "Jauh" },
        { en: "Above", id: "Di atas" }, { en: "Accept", id: "Menerima" }, { en: "Alone", id: "Sendirian" },
        { en: "Around", id: "Di sekitar" }, { en: "Ability", id: "Kemampuan" }, { en: "Add", id: "Menambahkan" },
        { en: "Address", id: "Alamat" }, { en: "Adult", id: "Dewasa" }, { en: "After", id: "Setelah" },
        { en: "Again", id: "Lagi" }, { en: "Age", id: "Usia" }, { en: "Air", id: "Udara" },
        { en: "Almost", id: "Hampir" }, { en: "Anything", id: "Apa saja" },
        { en: "Buy", id: "Membeli" }, { en: "Bring", id: "Membawa" }, { en: "Better", id: "Lebih baik" },
        { en: "Big", id: "Besar" }, { en: "Break", id: "Merusak" }, { en: "Build", id: "Membangun" },
        { en: "Before", id: "Sebelum" }, { en: "Begin", id: "Memulai" }, { en: "Busy", id: "Sibuk" },
        { en: "Body", id: "Badan" }, { en: "Baby", id: "Bayi" }, { en: "Back", id: "Kembali/Punggung" },
        { en: "Bad", id: "Buruk" }, { en: "Ball", id: "Bola" }, { en: "Bank", id: "Bank" },
        { en: "Beautiful", id: "Cantik/Indah" }, { en: "Become", id: "Menjadi" }, { en: "Behind", id: "Di belakang" },
        { en: "Book", id: "Buku" }, { en: "Both", id: "Keduanya" },
        { en: "Come", id: "Datang" }, { en: "Call", id: "Memanggil" }, { en: "Change", id: "Mengubah" },
        { en: "Clean", id: "Bersih" }, { en: "Close", id: "Menutup" }, { en: "Catch", id: "Menangkap" },
        { en: "Carry", id: "Membawa/Mengangkut" }, { en: "Cheap", id: "Murah" }, { en: "Careful", id: "Hati-hati" },
        { en: "Country", id: "Negara" }, { en: "Can", id: "Bisa/Dapat" }, { en: "Car", id: "Mobil" },
        { en: "Case", id: "Kasus" }, { en: "Child", id: "Anak" }, { en: "City", id: "Kota" },
        { en: "Class", id: "Kelas" }, { en: "Color", id: "Warna" }, { en: "Common", id: "Umum" },
        { en: "Company", id: "Perusahaan" }, { en: "Continue", id: "Melanjutkan" },
        { en: "Do", id: "Melakukan" }, { en: "Down", id: "Ke bawah" }, { en: "Dark", id: "Gelap" },
        { en: "Decide", id: "Memutuskan" }, { en: "Dream", id: "Mimpi" }, { en: "Drive", id: "Mengemudi" },
        { en: "Different", id: "Berbeda" }, { en: "Difficult", id: "Sulit" }, { en: "Danger", id: "Bahaya" },
        { en: "Deep", id: "Dalam" }, { en: "Day", id: "Hari" }, { en: "Deal", id: "Kesepakatan" },
        { en: "Death", id: "Kematian" }, { en: "Detail", id: "Rincian" }, { en: "Die", id: "Mati" },
        { en: "Door", id: "Pintu" }, { en: "Doubt", id: "Ragu" }, { en: "Drink", id: "Minum" },
        { en: "During", id: "Selama" }, { en: "Duty", id: "Tugas" },
        { en: "Eat", id: "Makan" }, { en: "Easy", id: "Mudah" }, { en: "Every", id: "Setiap" },
        { en: "Enough", id: "Cukup" }, { en: "Empty", id: "Kosong" }, { en: "Explain", id: "Menjelaskan" },
        { en: "Early", id: "Awal/Pagi" }, { en: "End", id: "Akhir" }, { en: "Even", id: "Bahkan" },
        { en: "Exit", id: "Keluar" }, { en: "Each", id: "Masing-masing" }, { en: "Earth", id: "Bumi" },
        { en: "Effect", id: "Efek" }, { en: "Eight", id: "Delapan" }, { en: "Enjoy", id: "Menikmati" },
        { en: "Equal", id: "Sama" }, { en: "Evening", id: "Sore/Malam" }, { en: "Ever", id: "Pernah" },
        { en: "Example", id: "Contoh" }, { en: "Eye", id: "Mata" },
        { en: "Find", id: "Menemukan" }, { en: "Fast", id: "Cepat" }, { en: "Far", id: "Jauh" },
        { en: "Friend", id: "Teman" }, { en: "Family", id: "Keluarga" }, { en: "Feel", id: "Merasa" },
        { en: "Finish", id: "Menyelesaikan" }, { en: "Forget", id: "Melupakan" }, { en: "Future", id: "Masa depan" },
        { en: "Follow", id: "Mengikuti" }, { en: "Face", id: "Wajah" }, { en: "Fact", id: "Fakta" },
        { en: "Fail", id: "Gagal" }, { en: "Fair", id: "Adil" }, { en: "Fall", id: "Jatuh" },
        { en: "Fear", id: "Ketakutan" }, { en: "Figure", id: "Angka/Sosok" }, { en: "Fine", id: "Baik-baik" },
        { en: "Fire", id: "Api" }, { en: "Floor", id: "Lantai" },
        { en: "Go", id: "Pergi" }, { en: "Get", id: "Mendapatkan" }, { en: "Good", id: "Bagus/Baik" },
        { en: "Give", id: "Memberi" }, { en: "Great", id: "Hebat" }, { en: "Green", id: "Hijau" },
        { en: "Grow", id: "Tumbuh" }, { en: "Guess", id: "Menebak" }, { en: "Group", id: "Kelompok" },
        { en: "Ground", id: "Tanah" }, { en: "Game", id: "Permainan" }, { en: "Garden", id: "Kebun" },
        { en: "General", id: "Umum/Jenderal" }, { en: "Gentle", id: "Lembut" }, { en: "Girl", id: "Gadis" },
        { en: "Glass", id: "Kaca" }, { en: "Goal", id: "Tujuan" }, { en: "Gold", id: "Emas" },
        { en: "Government", id: "Pemerintah" }, { en: "Guard", id: "Penjaga" },
        { en: "Have", id: "Memiliki" }, { en: "Help", id: "Membantu" }, { en: "Home", id: "Rumah" },
        { en: "Happy", id: "Senang" }, { en: "Hard", id: "Keras/Sulit" }, { en: "High", id: "Tinggi" },
        { en: "Hold", id: "Memegang" }, { en: "Hear", id: "Mendengar" }, { en: "Hope", id: "Berharap" },
        { en: "Hour", id: "Jam" }, { en: "Hair", id: "Rambut" }, { en: "Half", id: "Setengah" },
        { en: "Hand", id: "Tangan" }, { en: "Happen", id: "Terjadi" }, { en: "Head", id: "Kepala" },
        { en: "Heart", id: "Jantung/Hati" }, { en: "Heat", id: "Panas" }, { en: "History", id: "Sejarah" },
        { en: "Husband", id: "Suami" }, { en: "Hurry", id: "Buru-buru" },
        { en: "Idea", id: "Ide/Gagasan" }, { en: "Important", id: "Penting" }, { en: "Inside", id: "Di dalam" },
        { en: "Include", id: "Memasukkan" }, { en: "Instead", id: "Sebagai ganti" }, { en: "If", id: "Jika" },
        { en: "Image", id: "Gambar" }, { en: "Imagine", id: "Membayangkan" }, { en: "Immediate", id: "Segera" },
        { en: "Infact", id: "Faktanya" }, { en: "Inform", id: "Menginformasikan" }, { en: "Interest", id: "Minat" },
        { en: "Invite", id: "Mengundang" }, { en: "Is", id: "Adalah" }, { en: "Issue", id: "Masalah" },
        { en: "It", id: "Itu/Ia (benda)" }, { en: "Itself", id: "Dirinya sendiri" }, { en: "Item", id: "Barang" },
        { en: "Indeed", id: "Memang" }, { en: "Injure", id: "Melukai" },
        { en: "Join", id: "Bergabung" }, { en: "Jump", id: "Melompat" }, { en: "Job", id: "Pekerjaan" },
        { en: "Journey", id: "Perjalanan" }, { en: "Joy", id: "Kegembiraan" }, { en: "Judge", id: "Menghakimi" },
        { en: "Just", id: "Baru saja/Hanya" }, { en: "Jacket", id: "Jaket" }, { en: "Jealous", id: "Cemburu" },
        { en: "Joke", id: "Lelucon" },
        { en: "Know", id: "Tahu/Mengetahui" }, { en: "Keep", id: "Menjaga" }, { en: "Kind", id: "Baik hati/Jenis" },
        { en: "Key", id: "Kunci" }, { en: "Kiss", id: "Mencium" }, { en: "Kill", id: "Membunuh" },
        { en: "Kitchen", id: "Dapur" }, { en: "Knee", id: "Lutut" }, { en: "Knife", id: "Pisau" },
        { en: "Knock", id: "Mengetuk" },
        { en: "Look", id: "Melihat" }, { en: "Love", id: "Cinta" }, { en: "Light", id: "Cahaya/Terang" },
        { en: "Leave", id: "Meninggalkan" }, { en: "Listen", id: "Mendengarkan" }, { en: "Lady", id: "Nyonya" },
        { en: "Land", id: "Tanah/Darat" }, { en: "Language", id: "Bahasa" }, { en: "Last", id: "Terakhir" },
        { en: "Late", id: "Terlambat" }, { en: "Laugh", id: "Tertawa" }, { en: "Law", id: "Hukum" },
        { en: "Learn", id: "Belajar" }, { en: "Less", id: "Kurang" }, { en: "Letter", id: "Surat/Huruf" },
        { en: "Life", id: "Kehidupan" }, { en: "Line", id: "Garis" }, { en: "Little", id: "Kecil" },
        { en: "Live", id: "Tinggal/Hidup" }, { en: "Long", id: "Panjang" },
        { en: "Make", id: "Membuat" }, { en: "Many", id: "Banyak" }, { en: "Meet", id: "Bertemu" },
        { en: "Minute", id: "Menit" }, { en: "Money", id: "Uang" }, { en: "Machine", id: "Mesin" },
        { en: "Major", id: "Utama/Mayor" }, { en: "Man", id: "Pria" }, { en: "Mark", id: "Tanda" },
        { en: "Match", id: "Cocok/Pertandingan" }, { en: "Matter", id: "Masalah/Hal" }, { en: "May", id: "Boleh/Mungkin" },
        { en: "Meaning", id: "Arti" }, { en: "Measure", id: "Mengukur" }, { en: "Medical", id: "Medis" },
        { en: "Member", id: "Anggota" }, { en: "Mind", id: "Pikiran" }, { en: "Miss", id: "Merindukan/Nona" },
        { en: "Moment", id: "Momen" }, { en: "Month", id: "Bulan" },
        { en: "Need", id: "Membutuhkan" }, { en: "New", id: "Baru" }, { en: "Next", id: "Berikutnya" },
        { en: "Night", id: "Malam" }, { en: "Notice", id: "Memperhatikan" }, { en: "Name", id: "Nama" },
        { en: "Nation", id: "Bangsa" }, { en: "Natural", id: "Alami" }, { en: "Near", id: "Dekat" },
        { en: "Never", id: "Tidak pernah" }, { en: "Nice", id: "Baik/Menyenangkan" }, { en: "None", id: "Tidak ada" },
        { en: "Normal", id: "Normal" }, { en: "North", id: "Utara" }, { en: "Nose", id: "Hidung" },
        { en: "Not", id: "Tidak" }, { en: "Nothing", id: "Tidak ada apa-apa" }, { en: "Now", id: "Sekarang" },
        { en: "Number", id: "Nomor/Jumlah" }, { en: "Nut", id: "Kacang" },
        { en: "Often", id: "Sering" }, { en: "Once", id: "Sekali" }, { en: "Only", id: "Hanya" },
        { en: "Open", id: "Membuka" }, { en: "Order", id: "Memesan/Perintah" }, { en: "Other", id: "Lain" },
        { en: "Out", id: "Keluar" }, { en: "Over", id: "Di atas/Berakhir" }, { en: "Own", id: "Milik sendiri" },
        { en: "Occur", id: "Terjadi" }, { en: "Ocean", id: "Samudra" }, { en: "Off", id: "Mati/Lepas" },
        { en: "Offer", id: "Menawarkan" }, { en: "Office", id: "Kantor" }, { en: "Old", id: "Tua/Lama" },
        { en: "On", id: "Di/Pada" }, { en: "Operation", id: "Operasi" }, { en: "Opportunity", id: "Kesempatan" },
        { en: "Outside", id: "Di luar" }, { en: "Owner", id: "Pemilik" },
        { en: "Pack", id: "Mengepak" }, { en: "Page", id: "Halaman" }, { en: "Pain", id: "Rasa sakit" },
        { en: "Paper", id: "Kertas" }, { en: "Part", id: "Bagian" }, { en: "Pass", id: "Melewati" },
        { en: "Past", id: "Masa lalu" }, { en: "Path", id: "Jalur" }, { en: "Pay", id: "Membayar" },
        { en: "People", id: "Orang-orang" }, { en: "Perfect", id: "Sempurna" }, { en: "Perhaps", id: "Mungkin" },
        { en: "Person", id: "Orang" }, { en: "Phone", id: "Telepon" }, { en: "Picture", id: "Gambar" },
        { en: "Place", id: "Tempat" }, { en: "Plan", id: "Rencana" }, { en: "Point", id: "Titik/Poin" },
        { en: "Possible", id: "Mungkin" }, { en: "Power", id: "Kekuatan" },
        { en: "Quick", id: "Cepat" }, { en: "Quiet", id: "Tenang/Diam" }, { en: "Quality", id: "Kualitas" },
        { en: "Question", id: "Pertanyaan" }, { en: "Quote", id: "Mengutip" },
        { en: "Race", id: "Balapan/Ras" }, { en: "Radio", id: "Radio" }, { en: "Rain", id: "Hujan" },
        { en: "Range", id: "Jangkauan" }, { en: "Rate", id: "Tingkat/Harga" }, { en: "Rather", id: "Agak/Lebih suka" },
        { en: "Reach", id: "Mencapai" }, { en: "Read", id: "Membaca" }, { en: "Ready", id: "Siap" },
        { en: "Real", id: "Nyata" }, { en: "Reason", id: "Alasan" }, { en: "Receive", id: "Menerima" },
        { en: "Recent", id: "Baru-baru ini" }, { en: "Record", id: "Merekam/Catatan" }, { en: "Red", id: "Merah" },
        { en: "Remove", id: "Menghapus" }, { en: "Report", id: "Laporan" }, { en: "Rest", id: "Istirahat" },
        { en: "Result", id: "Hasil" }, { en: "Return", id: "Kembali" },
        { en: "Sad", id: "Sedih" }, { en: "Safe", id: "Aman" }, { en: "Same", id: "Sama" },
        { en: "Save", id: "Menyimpan/Menyelamatkan" }, { en: "Say", id: "Mengatakan" }, { en: "School", id: "Sekolah" },
        { en: "Science", id: "Sains" }, { en: "Search", id: "Mencari" }, { en: "Second", id: "Kedua/Detik" },
        { en: "See", id: "Melihat" }, { en: "Seem", id: "Terlihat/Nampak" }, { en: "Sell", id: "Menjual" },
        { en: "Send", id: "Mengirim" }, { en: "Sense", id: "Indra/Rasa" }, { en: "Series", id: "Seri" },
        { en: "Service", id: "Layanan" }, { en: "Set", id: "Mengatur" }, { en: "Seven", id: "Tujuh" },
        { en: "Sex", id: "Jenis kelamin" }, { en: "Shake", id: "Mengguncang" }, { en: "Share", id: "Berbagi" },
        { en: "She", id: "Dia (Perempuan)" }, { en: "Short", id: "Pendek" }, { en: "Show", id: "Menunjukkan" },
        { en: "Side", id: "Sisi" }, { en: "Sign", id: "Tanda/Masuk" }, { en: "Simple", id: "Sederhana" },
        { en: "Sister", id: "Saudara perempuan" }, { en: "Sit", id: "Duduk" }, { en: "Sleep", id: "Tidur" },
        { en: "Take", id: "Mengambil" }, { en: "Talk", id: "Berbicara" }, { en: "Tall", id: "Tinggi" },
        { en: "Teach", id: "Mengajar" }, { en: "Team", id: "Tim" }, { en: "Tell", id: "Memberitahu" },
        { en: "Ten", id: "Sepuluh" }, { en: "Term", id: "Istilah" }, { en: "Test", id: "Tes/Ujian" },
        { en: "Than", id: "Daripada" }, { en: "Thank", id: "Berterima kasih" }, { en: "That", id: "Itu" },
        { en: "Them", id: "Mereka (Objek)" }, { en: "Then", id: "Kemudian" }, { en: "Theory", id: "Teori" },
        { en: "There", id: "Di sana" }, { en: "These", id: "Ini (Jamak)" }, { en: "They", id: "Mereka" },
        { en: "Thing", id: "Benda/Hal" }, { en: "Think", id: "Berpikir" }, { en: "Third", id: "Ketiga" },
        { en: "This", id: "Ini (Tunggal)" }, { en: "Those", id: "Itu (Jamak)" }, { en: "Though", id: "Meskipun" },
        { en: "Three", id: "Tiga" }, { en: "Through", id: "Melalui" }, { en: "Time", id: "Waktu" },
        { en: "Today", id: "Hari ini" }, { en: "Together", id: "Bersama" }, { en: "Tonight", id: "Malam ini" },
        { en: "Under", id: "Di bawah" }, { en: "Unit", id: "Satuan/Unit" }, { en: "Until", id: "Sampai" },
        { en: "Up", id: "Naik/Atas" }, { en: "Use", id: "Menggunakan" },
        { en: "Value", id: "Nilai" }, { en: "Various", id: "Berbagai" }, { en: "Very", id: "Sangat" },
        { en: "View", id: "Pemandangan/Pandangan" }, { en: "Voice", id: "Suara" },
        { en: "Wait", id: "Menunggu" }, { en: "Walk", id: "Berjalan" }, { en: "Want", id: "Menginginkan" },
        { en: "War", id: "Perang" }, { en: "Watch", id: "Menonton" }, { en: "Water", id: "Air" },
        { en: "Way", id: "Jalan/Cara" }, { en: "We", id: "Kami/Kita" }, { en: "Wear", id: "Memakai" },
        { en: "Week", id: "Minggu" }, { en: "Well", id: "Baik" }, { en: "West", id: "Barat" },
        { en: "What", id: "Apa" }, { en: "When", id: "Kapan" }, { en: "Where", id: "Di mana" },
        { en: "Which", id: "Yang mana" }, { en: "White", id: "Putih" }, { en: "Who", id: "Siapa" },
        { en: "Why", id: "Mengapa" }, { en: "Window", id: "Jendela" },
        { en: "Year", id: "Tahun" }, { en: "Yes", id: "Ya" }, { en: "Yet", id: "Namun/Belum" },
        { en: "You", id: "Anda/Kamu" }, { en: "Young", id: "Muda" },
        { en: "Zero", id: "Nol" }
    ];

    // Variabel Global Kuis (SAMA)
    let currentQuestionIndex = 0;
    let finalQuizList = [];
    let allTranslations = [];
    let totalQuestionsToAsk = 0;
    let correctAnswers = 0;
    
    // Inisialisasi Speech API (SAMA)
    let synth = window.speechSynthesis;
    let selectedVoice = null;
    
    // ==========================================================
    // 2. FUNGSI AUDIO (Text-to-Speech) (SAMA)
    // ==========================================================
    
    function populateVoiceList() {
        if (synth.getVoices().length > 0) {
            const voices = synth.getVoices();
            selectedVoice = voices.find(voice => voice.lang.startsWith('en-US') || voice.lang.startsWith('en-GB')) || voices[0];
        } else {
            synth.onvoiceschanged = populateVoiceList;
        }
    }

    function speakWord(text) {
        if (!synth || !selectedVoice) return; 

        if (synth.speaking) {
            synth.cancel();
        }

        let utterance = new SpeechSynthesisUtterance(text);
        utterance.voice = selectedVoice;
        utterance.lang = 'en-US';
        utterance.rate = 0.9;
        
        synth.speak(utterance);
    }

    // ==========================================================
    // 3. FUNGSI LOGIKA KUIS (SAMA)
    // ==========================================================

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function generateQuestionData(correctItem) {
        const correctTranslation = correctItem.id;
        let incorrectTranslations = allTranslations.filter(t => t !== correctTranslation);
        shuffleArray(incorrectTranslations);
        const distractors = incorrectTranslations.slice(0, 2); 
        let options = [correctTranslation].concat(distractors);
        shuffleArray(options);
        while (options.length < 3) { options.push("Terjemahan Pengecoh"); }

        return {
            englishWord: correctItem.en,
            options: options,
            correctAnswer: correctTranslation
        };
    }

    function loadNextQuestion() {
        const quizContainer = document.getElementById('quiz-container');
        const nextButton = document.getElementById('next-button');
        const quizInfo = document.getElementById('quiz-info');
        
        nextButton.style.display = 'none';
        quizContainer.classList.remove('disabled');

        if (currentQuestionIndex >= totalQuestionsToAsk) {
            showResult();
            return;
        }

        const remaining = totalQuestionsToAsk - currentQuestionIndex;
        quizInfo.innerHTML = `Kosakata tersisa: **${remaining}** | Jawaban Benar: **${correctAnswers}** / ${currentQuestionIndex}`;

        const currentVocab = finalQuizList[currentQuestionIndex];
        const questionData = generateQuestionData(currentVocab);
        const wordToSpeak = questionData.englishWord;

        quizContainer.innerHTML = `
            <div class="question-card" id="current-question">
                <div class="word-container">
                    <div class="word">${wordToSpeak}</div>
                    <button class="audio-btn" onclick="speakWord('${wordToSpeak.replace(/'/g, "\\'")}')" title="Dengarkan Pengucapan">
                        üîä
                    </button>
                </div>
                <div id="options-container">
                    ${questionData.options.map(option => `
                        <button class="option" data-answer="${option}" onclick="checkAnswer(this, '${questionData.correctAnswer}')">
                            ${option}
                        </button>
                    `).join('')}
                </div>
                <div class="feedback" id="feedback-message"></div>
            </div>
        `;
        
        speakWord(wordToSpeak);
    }

    function checkAnswer(selectedButton, correctAnswer) {
        const feedbackDiv = document.getElementById('feedback-message');
        const optionsContainer = document.getElementById('options-container');
        const nextButton = document.getElementById('next-button');
        const allOptions = optionsContainer.querySelectorAll('.option');

        optionsContainer.classList.add('disabled');
        
        const selectedOption = selectedButton.getAttribute('data-answer');

        if (selectedOption === correctAnswer) {
            feedbackDiv.textContent = `‚úÖ BENAR! '${selectedOption}' adalah terjemahan yang tepat.`;
            feedbackDiv.className = 'feedback correct';
            selectedButton.classList.add('correct-highlight');
            correctAnswers++;
        } else {
            feedbackDiv.innerHTML = `‚ùå SALAH. Jawaban yang benar adalah **${correctAnswer}**.<br>Anda memilih: ${selectedOption}`;
            feedbackDiv.className = 'feedback incorrect';
            selectedButton.classList.add('incorrect-highlight');

            allOptions.forEach(option => {
                if (option.getAttribute('data-answer') === correctAnswer) {
                    option.classList.add('correct-highlight');
                }
            });
        }

        nextButton.style.display = 'block';
        currentQuestionIndex++;
        
        const quizInfo = document.getElementById('quiz-info');
        const remaining = totalQuestionsToAsk - currentQuestionIndex;
        quizInfo.innerHTML = `Kosakata tersisa: **${remaining}** | Jawaban Benar: **${correctAnswers}** / ${currentQuestionIndex}`; 
    }

    function showResult() {
        const quizContainer = document.getElementById('quiz-container');
        const percentage = totalQuestionsToAsk > 0 ? ((correctAnswers / totalQuestionsToAsk) * 100).toFixed(0) : 0;
        const totalIncorrect = totalQuestionsToAsk - correctAnswers;
        
        const resultHTML = `
            <h2>Hasil Kuis Sesi Ini üéâ</h2>
            <div class="results-box">
                <div class="score-percentage">${percentage}%</div>
                <div class="results-item">Total Soal Dikerjakan: <strong>${totalQuestionsToAsk}</strong></div>
                <div class="results-item" style="color: #5cb85c;">Jawaban Benar: <strong>${correctAnswers}</strong></div>
                <div class="results-item" style="color: #d9534f;">Jawaban Salah: <strong>${totalIncorrect}</strong></div>
            </div>
            <button class="restart-btn" onclick="window.location.reload()">Mulai Kuis Baru</button>
        `;

        quizContainer.innerHTML = resultHTML;
        document.getElementById('quiz-info').style.display = 'none';
        document.getElementById('next-button').style.display = 'none';
    }


    // ==========================================================
    // 4. FUNGSI PENGATURAN DAN INIASIALISASI (SAMA)
    // ==========================================================

    function startQuiz() {
        const numInput = document.getElementById('num-questions');
        const requestedCount = parseInt(numInput.value);
        const maxCount = VOCABULARY.length;
        const errorDiv = document.getElementById('settings-error');

        if (isNaN(requestedCount) || requestedCount < 5 || requestedCount > maxCount) {
            errorDiv.textContent = `Mohon masukkan jumlah antara 5 dan ${maxCount}.`;
            return;
        }

        totalQuestionsToAsk = requestedCount;
        currentQuestionIndex = 0;
        correctAnswers = 0;

        let shuffledAllVocab = [...VOCABULARY]; 
        shuffleArray(shuffledAllVocab);
        
        finalQuizList = shuffledAllVocab.slice(0, totalQuestionsToAsk);

        document.getElementById('settings-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'block';
        
        loadNextQuestion();
    }

    window.onload = function() {
        populateVoiceList();

        if (VOCABULARY.length < 3) {
             document.getElementById('settings-screen').innerHTML = '<h2>‚ö† Database kosakata minimal harus 3 kata!</h2>';
             return;
        }

        allTranslations = VOCABULARY.map(item => item.id);

        const maxCount = VOCABULARY.length;
        document.getElementById('num-questions').setAttribute('max', maxCount);
        document.getElementById('num-questions').placeholder = `5 - ${maxCount}`;
    };

</script>

</body>
</html>
